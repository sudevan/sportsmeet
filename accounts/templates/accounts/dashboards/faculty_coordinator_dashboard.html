{% extends 'accounts/dashboards/base_dashboard.html' %}

{% block title %}Faculty Coordinator Dashboard | Sports Meet{% endblock %}

{% block page_title %}ğŸ‘¨â€ğŸ« Faculty Coordinator Dashboard{% endblock %}
{% block page_subtitle %}
Manage department students and assign events to active meets
{% endblock %}

{% block content %}
<div class="dashboard-grid">

    <!-- Active Meets -->
    <div class="glass-card" style="grid-column: span 2;">
        <div class="card-header">
            <h3 class="card-title">ğŸ† Active Meets</h3>
        </div>

        <ul class="list">
            {% for item in meets_data %}
            <li class="list-item" style="flex-direction: column; align-items: flex-start;">
                <div style="width:100%; display:flex; justify-content:space-between;">
                    <div>
                        <strong>{{ item.meet.name }}</strong>
                        <p style="font-size:0.85rem; color:var(--text-secondary);">
                            {{ item.meet.start_date }} â€“ {{ item.meet.end_date }}
                        </p>
                    </div>
                    <span class="role-badge">{{ item.meet.status }}</span>
                </div>

                <div style="margin-top:10px; width:100%;">
                    <a href="{% url 'accounts:faculty_assign_events_to_meet' item.meet.id %}"
                        class="btn-action btn-outline">
                        â• Assign Events
                    </a>

                    <div style="margin-top: 20px;">
                        <h5
                            style="margin-bottom: 10px; color: var(--text-secondary); font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px;">
                            Assigned Events</h5>
                        {% for me in item.assigned_events %}

                            {# ğŸ‘¦ Boys Event #}
                            {% if me.event.gender_boys %}
                            <a href="{% url 'accounts:add_student_to_event' me.id %}" style="text-decoration: none;">
                                <div style="
                                    display: flex; 
                                    justify-content: space-between; 
                                    align-items: center; 
                                    padding: 12px; 
                                    margin-bottom: 8px; 
                                    background: rgba(54, 162, 235, 0.15); 
                                    border: 1px solid var(--glass-border); 
                                    border-radius: 8px; 
                                    color: var(--text-primary);
                                    transition: all 0.2s ease;">
                                    <span>ğŸ‘¦ {{ me.event.name }}</span>
                                    <span style="opacity: 0.7;">âœ</span>
                                </div>
                            </a>
                            {% endif %}

                            {# ğŸ‘§ Girls Event #}
                            {% if me.event.gender_girls %}
                            <a href="{% url 'accounts:add_student_to_event' me.id %}" style="text-decoration: none;">
                                <div style="
                                    display: flex; 
                                    justify-content: space-between; 
                                    align-items: center; 
                                    padding: 12px; 
                                    margin-bottom: 8px; 
                                    background: rgba(255, 99, 132, 0.15); 
                                    border: 1px solid var(--glass-border); 
                                    border-radius: 8px; 
                                    color: var(--text-primary);
                                    transition: all 0.2s ease;">
                                    <span>ğŸ‘§ {{ me.event.name }}</span>
                                    <span style="opacity: 0.7;">âœ</span>
                                </div>
                            </a>
                        {% endif %}

                        {% empty %}
                        <p style="color: var(--text-secondary); font-style: italic;">
                            No events assigned yet.
                        </p>
                        {% endfor %}

                    </div>
                </div>
            </li>
            {% empty %}
            <li class="list-item">No active meets available</li>
            {% endfor %}
        </ul>
    </div>

</div>
{% endblock %}